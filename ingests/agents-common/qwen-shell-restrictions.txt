     * Command Restrictions
     * Command Restriction Examples
     * Security Note for excludeTools

   Question? Give us feedback Edit this page  (BUTTON) Scroll to top
   Tools CollectionShell Tools

Shell Tool (run_shell_command)

   This document describes the run_shell_command tool for Qwen Code.

Description

   Use run_shell_command to interact with the underlying system, run
   scripts, or perform command-line operations. run_shell_command executes
   a given shell command. On Windows, the command will be executed with
   cmd.exe /c. On other platforms, the command will be executed with bash
   -c.

Arguments

   run_shell_command takes the following arguments:
     * command (string, required): The exact shell command to execute.
     * description (string, optional): A brief description of the
       commandâ€™s purpose, which will be shown to the user.
     * directory (string, optional): The directory (relative to the
       project root) in which to execute the command. If not provided, the
       command runs in the project root.
     * is_background (boolean, required): Whether to run the command in
       background. This parameter is required to ensure explicit
       decision-making about command execution mode. Set to true for
       long-running processes like development servers, watchers, or
--
Command Restrictions

   You can restrict the commands that can be executed by the
   run_shell_command tool by using the coreTools and excludeTools settings
   in your configuration file.
     * coreTools: To restrict run_shell_command to a specific set of
       commands, add entries to the coreTools list in the format
       run_shell_command(<command>). For example, "coreTools":
       ["run_shell_command(git)"] will only allow git commands. Including
       the generic run_shell_command acts as a wildcard, allowing any
       command not explicitly blocked.
     * excludeTools: To block specific commands, add entries to the
       excludeTools list in the format run_shell_command(<command>). For
       example, "excludeTools": ["run_shell_command(rm)"] will block rm
       commands.

   The validation logic is designed to be secure and flexible:
    1. Command Chaining Disabled: The tool automatically splits commands
       chained with &&, ||, or ; and validates each part separately. If
       any part of the chain is disallowed, the entire command is blocked.
    2. Prefix Matching: The tool uses prefix matching. For example, if you
       allow git, you can run git status or git log.
    3. Blocklist Precedence: The excludeTools list is always checked
       first. If a command matches a blocked prefix, it will be denied,
       even if it also matches an allowed prefix in coreTools.

  Command Restriction Examples

   Allow only specific command prefixes

   To allow only git and npm commands, and block all others:


   (BUTTON)
   { "coreTools": ["run_shell_command(git)", "run_shell_command(npm)"] }

     * git status: Allowed
     * npm install: Allowed
     * ls -l: Blocked

   Block specific command prefixes

   To block rm and allow all other commands:


   (BUTTON)
   { "coreTools": ["run_shell_command"], "excludeTools":
   ["run_shell_command(rm)"] }

     * rm -rf /: Blocked
     * git status: Allowed
     * npm install: Allowed

   Blocklist takes precedence

   If a command prefix is in both coreTools and excludeTools, it will be
   blocked.
